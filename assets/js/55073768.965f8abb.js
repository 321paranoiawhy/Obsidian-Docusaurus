"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5667],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,g=u["".concat(p,".").concat(m)]||u[m]||c[m]||l;return n?a.createElement(g,o(o({ref:t},d),{},{components:n})):a.createElement(g,o({ref:t},d))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[u]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7627:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const l={},o="\u83b7\u53d6\u4e8c\u8fdb\u5236\u56fe\u7247\u6570\u636e\u5e76\u5c55\u793a",i={unversionedId:"Flutter-&-Dart/Flutter/Snippets",id:"Flutter-&-Dart/Flutter/Snippets",title:"\u83b7\u53d6\u4e8c\u8fdb\u5236\u56fe\u7247\u6570\u636e\u5e76\u5c55\u793a",description:"API \u63a5\u53e3",source:"@site/docs/Flutter-&-Dart/Flutter/Snippets.md",sourceDirName:"Flutter-&-Dart/Flutter",slug:"/Flutter-&-Dart/Flutter/Snippets",permalink:"/Obsidian-Docusaurus/docs/Flutter-&-Dart/Flutter/Snippets",draft:!1,editUrl:"https://github.com/321paranoiawhy/Obsidian-Docusaurus/edit/dev/docs/Flutter-&-Dart/Flutter/Snippets.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"GET",permalink:"/Obsidian-Docusaurus/docs/Flutter-&-Dart/Flutter/Request/GET"},next:{title:"Overview",permalink:"/Obsidian-Docusaurus/docs/Flutter-&-Dart/Flutter/State-Management/intro"}},p={},s=[{value:"API \u63a5\u53e3",id:"api-\u63a5\u53e3",level:2},{value:"\u5c55\u793a",id:"\u5c55\u793a",level:2},{value:"Google",id:"google",level:2},{value:"\u5706\u5f62\u6309\u94ae",id:"\u5706\u5f62\u6309\u94ae",level:2},{value:"AutomaticKeepAliveClientMixin",id:"automatickeepaliveclientmixin",level:2},{value:"PageStorageKey",id:"pagestoragekey",level:2}],d={toc:s},u="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u83b7\u53d6\u4e8c\u8fdb\u5236\u56fe\u7247\u6570\u636e\u5e76\u5c55\u793a"},"\u83b7\u53d6\u4e8c\u8fdb\u5236\u56fe\u7247\u6570\u636e\u5e76\u5c55\u793a"),(0,r.kt)("h2",{id:"api-\u63a5\u53e3"},"API \u63a5\u53e3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:http/http.dart' as http;\nimport 'dart:typed_data'; // Uint8List type\n\n// https://stackoverflow.com/questions/68666059/flutter-byte-array-response-body-to-file\n// \u8fd4\u56de Uint8List\nFuture<Uint8List> fetchBinaryImage(String url) async {\n  http.Response response = await http.get(Uri.parse(url));\n  return response.bodyBytes;\n}\n")),(0,r.kt)("h2",{id:"\u5c55\u793a"},"\u5c55\u793a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"Widget buildImage() async {\n  Uint8List response = await fetchBinaryImage(\n      'https://upload.wikimedia.org/wikipedia/en/a/a9/Example.jpg');\n  return Image.memory(response);\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://pub.dev/documentation/http/latest/http/Response/bodyBytes.html"},"http Response bodyBytes property"))),(0,r.kt)("h1",{id:"\u4e0b\u8f7d\u56fe\u7247\u5230\u672c\u5730"},"\u4e0b\u8f7d\u56fe\u7247\u5230\u672c\u5730"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'dart:io'; // File\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter_file_dialog/flutter_file_dialog.dart';\nimport 'package:http/http.dart' as http;\nimport 'package:path_provider/path_provider.dart';\n\nFuture<void> _saveImage(BuildContext context, String url) async {\n  String? message;\n  final scaffoldMessenger = ScaffoldMessenger.of(context);\n\n  try {\n    // Download image\n    final http.Response response = await http.get(Uri.parse(url));\n\n    // Get temporary directory\n    final dir = await getTemporaryDirectory();\n\n    // Create an image name\n    var filename = '${dir.path}/test/saved_iamge.png';\n\n    // Save to filesystem\n    final file = File(filename);\n    await file.writeAsBytes(response.bodyBytes);\n\n    // Ask the user to save it\n    final params = SaveFileDialogParams(sourceFilePath: file.path);\n    final finalPath = await FlutterFileDialog.saveFile(params: params);\n\n    if (finalPath != null) {\n      message = 'Image saved to disk.';\n    }\n  } catch (e) {\n    message = 'An error occurred while saving the image.';\n  }\n\n  if (message != null) {\n    scaffoldMessenger.showSnackBar(SnackBar(content: Text(message)));\n  }\n}\n")),(0,r.kt)("h1",{id:"\u63a5\u5165\u7b2c\u4e09\u65b9\u5e73\u53f0\u767b\u5f55"},"\u63a5\u5165\u7b2c\u4e09\u65b9\u5e73\u53f0\u767b\u5f55"),(0,r.kt)("h2",{id:"google"},"Google"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"api.dart"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'dart:convert';\nimport 'package:http/http.dart' as http;\n\nFuture<http.Response> verifyIdToken(Map<String, String> body) async {\n  Uri url = Uri.parse('https://dev-api.cereb.ai/v1/login/google_oauth2');\n  http.Response response = await http.post(url, body: json.encode(body));\n  return response;\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"login.dart"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:google_sign_in/google_sign_in.dart';\nimport '../api.dart' as api;\n\n/// Google \u8d26\u53f7\u767b\u5f55\nFuture<void> onGoogleSignIn() async {\n  final GoogleSignIn _googleSignIn = GoogleSignIn(\n    // Optional clientId\n    // https://medium.com/@druhin.bala/google-signin-without-firebase-for-android-on-flutter-e3ee834f696e\n    clientId:\n        '998005764794-ct09ghhrlaft05f1eau9i64f1ksf5noj.apps.googleusercontent.com',\n    scopes: [\n      'https://www.googleapis.com/auth/userinfo.email',\n      'openid',\n      'https://www.googleapis.com/auth/userinfo.profile',\n    ],\n  );\n  \n  try {\n    // GoogleSignInAccount \u4e0b\u9762\u6709\u4ee5\u4e0b\u5c5e\u6027: displayName / email / id / photoUrl / serverAuthCode\n    // https://pub.dev/documentation/google_sign_in/latest/google_sign_in/GoogleSignInAccount-class.html\n    final GoogleSignInAccount? googleUser = await _googleSignIn.signIn();\n\n    // GoogleSignInAuthentication \u4e0b\u9762\u6709\u4ee5\u4e0b\u5c5e\u6027: accessToken / idToken\n    // https://pub.dev/documentation/google_sign_in/latest/google_sign_in/GoogleSignInAuthentication-class.html\n    final GoogleSignInAuthentication? googleAuth =\n        await googleUser?.authentication;\n\n    if (googleAuth?.idToken != null) {\n      var res = await api.verifyIdToken({'id_token': googleAuth?.idToken});\n      debugPrint('res: $res');\n    } else {\n      debugPrint('idToken is null.');\n    }\n  } catch (error) {\n    debugPrint('error: $error');\n  }\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"python")," \u6821\u9a8c ",(0,r.kt)("inlineCode",{parentName:"p"},"idToken"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# https://google-auth.readthedocs.io/en/stable/reference/google.oauth2.id_token.html\nfrom google.oauth2 import id_token\nfrom google.auth.transport import requests\nfrom aiohttp import web\n\nGOOGLE_CLIENT_ID: str = '998005764794-ct09ghhrlaft05f1eau9i64f1ksf5noj.apps.googleusercontent.com'\n\n# https://developers.google.com/identity/gsi/web/guides/verify-google-id-token?hl=zh-cn#using-a-google-api-client-library\ndef verify_id_token(token:str):\n    try:\n        id_info = id_token.verify_oauth2_token(token, requests.Request(),\n                                               GOOGLE_CLIENT_ID)\n        print(id_info)\n        if id_info['iss'] not in [\n                'accounts.google.com', 'https://accounts.google.com'\n        ]:\n            return (False, \"Could not verify token signature.\")\n        return ((True, \"Token verified\"))\n    except ValueError as e:\n        print(e)  #o r Log the error\n        return (False, \"Could not verify token signature.\")\n\n\nroutes = web.RouteTableDef()\n\n\n@routes.post('/verify_id_token')\nasync def store_mp3_handler(request):\n    data = await request.json()\n    # print(data)\n    user_id_token:str = data['id_token']\n    print(len(data['id_token']))\n    print(verify_id_token(user_id_token))\n\n    # https://developers.google.com/identity/sign-in/web/backend-auth?hl=zh-cn#calling-the-tokeninfo-endpoint\n    return web.Response(text=\"OK\")\n\n\napp = web.Application()\napp.add_routes(routes)\nweb.run_app(app, port=1234)\n")),(0,r.kt)("h1",{id:"\u4e00\u4e9b\u5e38\u91cf"},"\u4e00\u4e9b\u5e38\u91cf"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://api.flutter.dev/flutter/foundation/kDebugMode-constant.html"},"kDebugMode top-level constant"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://api.flutter.dev/flutter/foundation/kReleaseMode-constant.html"},"kReleaseMode top-level constant"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://api.flutter.dev/flutter/foundation/kProfileMode-constant.html"},"kProfileMode top-level constant"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://api.flutter.dev/flutter/package-platform_platform/Platform-class.html"},"Platform class"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://api.flutter.dev/flutter/foundation/kIsWeb-constant.html"},"kIsWeb top-level constant"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"kXMode"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kDebugMode")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kReleaseMode")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"kProfileMode")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Platform.isX"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Platform.isAndroid")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Platform.isFuchsia")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Platform.isIOS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Platform.isLinux")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Platform.isMacOS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Platform.isWindows")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"kIsWeb")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'dart:io' show Platform;\n\nprint('isAndroid: ${Platform.isAndroid}');\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:flutter/foundation.dart'\n\nprint('kDebugMode: $kDebugMode');\n\nprint('kIsWeb: $kIsWeb');\n")),(0,r.kt)("h1",{id:"\u6309\u94ae"},"\u6309\u94ae"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://book.flutterchina.club/chapter3/buttons.html#_3-2-1-elevatedbutton"},"\u6309\u94ae - Flutter \u5b9e\u6218\xb7\u7b2c\u4e8c\u7248"))),(0,r.kt)("h2",{id:"\u5706\u5f62\u6309\u94ae"},"\u5706\u5f62\u6309\u94ae"),(0,r.kt)("p",null,"\u8bbe\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"Container.decoration.shape")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"BoxShape.circle"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"Container(\n    decoration: BoxDecoration(\n        shape: BoxShape.circle,\n    ),\n)\n")),(0,r.kt)("h1",{id:"\u66f4\u6539\u56fe\u7247\u989c\u8272"},"\u66f4\u6539\u56fe\u7247\u989c\u8272"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://medium.com/vijay-r/color-filtered-widget-apply-multiple-colors-over-images-in-flutter-image-color-filters-746f45f90080"},"Color Filtered Widget \u2014 Apply multiple colors over images in Flutter | Image Color Filters")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://api.flutter.dev/flutter/widgets/ColorFiltered-class.html"},"ColorFiltered class"))),(0,r.kt)("p",null,"\u67e5\u770b ",(0,r.kt)("inlineCode",{parentName:"p"},"BlendMode")," \u6240\u6709\u679a\u4e3e\u503c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"BlendMode.values\n")),(0,r.kt)("admonition",{title:"BlendMode.values",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"[BlendMode.clear, BlendMode.src, BlendMode.dst, BlendMode.srcOver, BlendMode.dstOver, BlendMode.srcIn, BlendMode.dstIn, BlendMode.srcOut, BlendMode.dstOut, BlendMode.srcATop, BlendMode.dstATop, BlendMode.xor, BlendMode.plus, BlendMode.modulate, BlendMode.screen, BlendMode.overlay, BlendMode.darken, BlendMode.lighten, BlendMode.colorDodge, BlendMode.colorBurn, BlendMode.hardLight, BlendMode.softLight, BlendMode.difference, BlendMode.exclusion, BlendMode.multiply, BlendMode.hue, BlendMode.saturation, BlendMode.color, BlendMode.luminosity]")),(0,r.kt)("h1",{id:"\u4fdd\u6301\u5217\u8868\u6eda\u52a8\u4f4d\u7f6e"},"\u4fdd\u6301\u5217\u8868\u6eda\u52a8\u4f4d\u7f6e"),(0,r.kt)("h2",{id:"automatickeepaliveclientmixin"},"AutomaticKeepAliveClientMixin"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://api.flutter.dev/flutter/widgets/AutomaticKeepAliveClientMixin-mixin.html"},"AutomaticKeepAliveClientMixin")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://juejin.cn/post/6979972557575782407"},"AutomaticKeepAlive\u8be6\u89e3"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"// \u6df7\u5165 `AutomaticKeepAliveClientMixin`\nclass _KeepAliveState extends State<MyListItem>\n    with AutomaticKeepAliveClientMixin {\n  @override\n  Widget build(BuildContext context) {\n    return Placeholder();\n  }\n\n  @override\n  // \u8986\u5199 `wantKeepAlive` \u8fd4\u56de `true`\n  bool get wantKeepAlive => true;\n}\n")),(0,r.kt)("h2",{id:"pagestoragekey"},"PageStorageKey"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://api.flutter.dev/flutter/widgets/PageStorageKey-class.html"},"PageStorageKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://book.flutterchina.club/chapter6/scroll_controller.html#_3-%E6%BB%9A%E5%8A%A8%E4%BD%8D%E7%BD%AE%E6%81%A2%E5%A4%8D"},"\u6eda\u52a8\u4f4d\u7f6e\u6062\u590d"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"SingleChildScrollView(key: const PageStorageKey(1))\n")),(0,r.kt)("h1",{id:"webview"},"WebView"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://codelabs.developers.google.com/codelabs/flutter-webview?hl=zh-cn#0"},"\u5c06 WebView \u6dfb\u52a0\u5230\u60a8\u7684 Flutter \u5e94\u7528"))))}c.isMDXComponent=!0}}]);